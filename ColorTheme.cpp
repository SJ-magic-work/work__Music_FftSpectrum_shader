/************************************************************
************************************************************/
#include "ColorTheme.h"

/************************************************************
************************************************************/
COLOR_THEME ColorTheme_org[] = 
{
#if (TITLE == TITLE__FAITHLESS)
	{         0, 0},
	{     16277, 1},
	{     38638, 0},
	{     71203, 3},
	{     98115, 0},
	{    126397, 3},
	{    152949, 7},
	{    177946, 4},
	{    212427, 7},
	{    235020, 5},
	{    260109, 7},
	{    282784, 4},
	{    315048, 6},
	{    316720, 7},
	{    343608, 4},
	{    378380, 7},
	{    400613, 5},
	{    421268, 7},
	{    443547, 1},
	{    471945, 7},
	{    521775, 0},
	{    595812, 7},
	{    707639, 6},
	{    760859, 5},
	{    805186, 6},
	{    849931, 3},
	{    928658, 6},
	{    971209, 2},
	{    996762, 6},
	{   1018415, 1},
	{   1041751, 6},
	{   1064216, 1},
	{   1088957, 6},
	{   1112758, 5},
	{   1136117, 7},
	{   1158466, 5},
	{   1180665, 6},
	{   1208227, 5},
	{   1268239, 6},
	{   1328599, 5},
	{   1349613, 7},
	{   1388251, 5},
	{   1442609, 2},
	{   1461347, 4},
	{   1468847, 3},
	{   1485728, 5},
	{   1575706, 4},
	{   1620706, 0},
	{   1658206, 4},
	{   1719391, 6},
	{   1795924, 4},
	{   1965720, 2},
	{   1990089, 4},
	{   2030364, 1},
	{   2055674, 4},
	{   2085732, 3},
	{   2179366, 7},
	{   2235733, 3},
	{   2295733, 4},
	{   2326616, 3},
	{   2378234, 7},
	{   2391353, 5},
	{   2402603, 1},
	{   2408234, 3},
	{   2429747, 7},
	{   2483525, 2},
	{   2529129, 1},
	{   2571668, 2},
	{   2601946, 0},
	{   2635801, 2},
	{   2679791, 7},
	{   2735043, 2},
	{   2771754, 4},
	{   2849761, 2},
	{   2925900, 3},
	{   2994259, 1},
	{   3021891, 3},
	{   3129759, 1},
	{   3187902, 4},
	{   3233065, 1},
	{   3327477, 3},
	{   3385260, 5},
	{   3429784, 0},
	{   3456325, 2},
	{   3479939, 0},
	{   3503542, 1},
	{   3586391, 0},
	{   3637858, 2},
	{   3669356, 0},
	{   3704116, 6},
	{   3725084, 0},
	{   3748559, 5},
	{   3799341, 1},
	{   3813842, 0},
	{   3855116, 5},
	{   3893324, 7},
	{   3925832, 2},
	{   3954335, 7},
	{   4028696, 0},
	{   4106181, 7},
	{   4254185, 5},
	{   4472418, 6},
	{   4510325, 0},
	{   4531501, 6},
	{   4572194, 0},
	{   4594358, 6},

#elif(TITLE == TITLE__TIESTO_465)
	{         0, 0},
	{      1474, 3},
	{     28885, 0},
	{     53568, 2},
	{     78924, 0},
	{    103061, 7},
	{    133561, 0},
	{    157617, 7},
	{    183124, 3},
	{    209734, 7},
	{    240222, 3},
	{    261305, 7},
	{    315988, 6},
	{    346418, 7},
	{    376894, 4},
	{    423357, 7},
	{    453079, 3},
	{    484043, 7},
	{    515448, 2},
	{    548617, 7},
	{    570885, 6},
	{    597054, 1},
	{    627751, 6},
	{    644748, 1},
	{    650158, 6},
	{    659377, 1},
	{    672345, 6},
	{    732926, 4},
	{    754799, 6},
	{    774919, 1},
	{    809459, 6},
	{    830287, 4},
	{    914227, 6},
	{    944343, 2},
	{    967227, 5},
	{    997424, 1},
	{   1020760, 5},
	{   1042506, 3},
	{   1072181, 5},
	{   1132425, 6},
	{   1187967, 5},
	{   1249059, 5},
	{   1266869, 0},
	{   1282809, 1},
	{   1299249, 5},
	{   1346443, 3},
	{   1435817, 4},
	{   1455937, 2},
	{   1496084, 4},
	{   1527745, 0},
	{   1560450, 4},
	{   1598531, 7},
	{   1623666, 4},
	{   1644460, 7},
	{   1658612, 4},
	{   1667320, 5},
	{   1713446, 4},
	{   1754128, 5},
	{   1788900, 4},
	{   1823997, 7},
	{   1833853, 4},
	{   1899926, 3},
	{   1933154, 7},
	{   1938366, 3},
	{   1984609, 7},
	{   2015619, 3},
	{   2020774, 0},
	{   2051239, 3},
	{   2073971, 7},
	{   2128074, 1},
	{   2139753, 3},
	{   2180469, 4},
	{   2201251, 3},
	{   2231576, 4},
	{   2266778, 2},
	{   2275625, 3},
	{   2356628, 4},
	{   2366508, 2},
	{   2403590, 7},
	{   2464426, 3},
	{   2509322, 2},
	{   2533134, 7},
	{   2568045, 2},
	{   2601795, 6},
	{   2661749, 2},
	{   2706726, 5},
	{   2787218, 1},
	{   2821468, 2},
	{   2838604, 5},
	{   2852617, 1},
	{   2880075, 0},
	{   2906824, 1},
	{   2933968, 0},
	{   2960671, 1},
	{   2992912, 6},
	{   3022529, 1},
	{   3060146, 5},
	{   3080254, 0},
	{   3118010, 4},
	{   3140614, 6},
	{   3170615, 0},
	{   3212294, 1},
	{   3246834, 0},
	{   3307775, 0},
	{   3343499, 7},
	{   3388708, 0},
	{   3413519, 5},
	{   3421158, 0},
	{   3449719, 7},
	{   3481600, 4},
	{   3532916, 7},
	{   3555764, 3},
	{   3617309, 7},
	{   3647785, 2},

#elif(TITLE == TITLE__TIESTO_471)
	{         0, 0},
	{      1474, 1},
	{     28897, 6},
	{     53568, 1},
	{     98858, 4},
	{    190264, 1},
	{    224525, 2},
	{    281634, 0},
	{    312122, 1},
	{    345071, 0},
	{    390222, 7},
	{    420710, 0},
	{    470656, 6},
	{    491183, 0},
	{    518280, 5},
	{    561679, 0},
	{    584527, 3},
	{    613099, 7},
	{    622631, 0},
	{    653618, 2},
	{    683270, 0},
	{    727690, 7},
	{    756285, 1},
	{    788897, 7},
	{    808994, 2},
	{    822102, 7},
	{    829625, 2},
	{    849734, 7},
	{    879362, 6},
	{    905218, 7},
	{    909455, 6},
	{    940919, 7},
	{    991190, 5},
	{   1018311, 7},
	{   1034565, 6},
	{   1042715, 7},
	{   1102762, 6},
	{   1125227, 2},
	{   1150792, 4},
	{   1155715, 6},
	{   1207925, 1},
	{   1229461, 6},
	{   1260263, 0},
	{   1309013, 6},
	{   1339419, 7},
	{   1369524, 6},
	{   1411192, 5},
	{   1437686, 6},
	{   1464250, 1},
	{   1501588, 5},
	{   1648640, 0},
	{   1706805, 5},
	{   1751829, 7},
	{   1796911, 5},
	{   1826562, 6},
	{   1857039, 5},
	{   1939028, 4},
	{   1959531, 6},
	{   1984377, 4},
	{   2014853, 0},
	{   2041986, 4},
	{   2084037, 2},
	{   2112853, 1},
	{   2115604, 4},
	{   2141947, 0},
	{   2213883, 4},
	{   2241085, 7},
	{   2262355, 2},
	{   2288222, 4},
	{   2337378, 5},
	{   2359716, 4},
	{   2405436, 3},
	{   2427205, 5},
	{   2450007, 3},
	{   2487890, 2},
	{   2513374, 3},
	{   2543792, 2},
	{   2573351, 3},
	{   2616912, 1},
	{   2639888, 3},
	{   2671304, 7},
	{   2700968, 3},
	{   2738364, 6},
	{   2796472, 3},
	{   2819006, 5},
	{   2856542, 2},
	{   2887099, 4},
	{   2928059, 2},
	{   2966175, 6},
	{   2995130, 2},
	{   3017630, 1},
	{   3044879, 2},
	{   3100223, 0},
	{   3201474, 2},
	{   3224032, 1},
	{   3250712, 5},
	{   3270867, 6},
	{   3280677, 1},
	{   3325933, 4},
	{   3345867, 2},
	{   3355248, 1},
	{   3383089, 7},
	{   3415214, 1},
	{   3445225, 6},
	{   3497714, 1},
	{   3528132, 0},
	{   3586565, 1},
	{   3593380, 0},
	{   3620757, 1},
	{   3641898, 0},
	{   3667185, 3},
	{   3693191, 0},

#endif

	{-1, 0},
};

int NumTimeTable = sizeof(ColorTheme_org) / sizeof(ColorTheme_org[0]);

/************************************************************
************************************************************/

/******************************
******************************/
COLOR_THEME_TABLE::COLOR_THEME_TABLE()
{
	b_Last = false;
	id = 0;
	
	Table = new COLOR_THEME[NumTimeTable];
	
	for(int i = 0; i < NumTimeTable; i++){
		Table[i] = ColorTheme_org[i];
	}
}

/******************************
******************************/
COLOR_THEME_TABLE::~COLOR_THEME_TABLE()
{
	delete [] Table;
}

/******************************
******************************/
void COLOR_THEME_TABLE::reset()
{
	b_Last = false;
	id = 0;
}

/******************************
******************************/
int COLOR_THEME_TABLE::IsColorThemeChange(int now_ms)
{
	/********************
	********************/
	if(b_Last)	return -1;
	
	/********************
	********************/
	int NextId;
	
	if(Table[id].time_ms <= now_ms){
		while(Table[id].time_ms <= now_ms){
			id++;
			if(Table[id].time_ms == -1){
				b_Last = true;
				break;
			}
		}
		
		NextId = Table[id - 1].Color_id;
		return NextId;
		
	}else{
		return -1;
	}
}

/******************************
******************************/
bool COLOR_THEME_TABLE::IsColorThemeChange_soon(int now_ms)
{
	/********************
	********************/
	if(b_Last)	return false;
	
	/********************
	********************/
	const int thresh_ms = 1500;
	if(Table[id].time_ms <= now_ms){
		return false;
	}else if(Table[id].time_ms - now_ms < thresh_ms){
		return true;
	}else{
		return false;
	}
}
